<?xml version="1.0" encoding="UTF-8"?>
<microprocessor name="Grapher" description="Microcontroller, used to draw data graphs" width="2" length="2" id_counter="13" id_counter_node="4" sym0="16386" sym1="65535" sym2="16386" sym3="14042" sym4="14042" sym5="14042" sym6="14042" sym7="1754" sym8="1562" sym9="1562" sym10="1538" sym11="1538" sym12="2" sym13="2" sym14="7" sym15="2">
	<nodes>
		<n id="1" component_id="3">
			<node label="Data" mode="1" type="5" description="The input signal to be processed."/>
		</n>
		<n id="2" component_id="6">
			<node label="Monitor" type="6" description="The input signal to be processed.">
				<position z="1"/>
			</node>
		</n>
		<n id="3" component_id="10">
			<node label="Multiplier" mode="1" type="1" description="The input signal to be processed.">
				<position x="1"/>
			</node>
		</n>
		<n id="4" component_id="12">
			<node label="Subtractor" mode="1" type="1" description="The input signal to be processed.">
				<position x="1" z="1"/>
			</node>
		</n>
	</nodes>
	<group>
		<data>
			<inputs/>
			<outputs/>
		</data>
		<components>
			<c type="56">
				<object id="7" script='data = {}
index = 1
w = 0
h = 0
spacing = 5

channel = property.getNumber("Channel To Read")
function onTick()
	multiplier = input.getNumber(3)
	subtractor = input.getNumber(4)
	value = (input.getNumber(channel) * multiplier) - subtractor
	
	if index &gt; w/spacing then
		index = 1
		data = {}
	end
	
	data[index] = value
	index = index + 1
end

function onDraw()
	w = screen.getWidth()
	h = screen.getHeight()					
	
	screen.setColor(255, 255, 255)
	
	screen.setColor(255, 255, 255, 150)
	screen.drawLine(0, h/2, w, h/2)
	
	screen.drawText(0, 23, "data: " .. data[1])
	
	for i,x in ipairs(data) do
		screen.setColor(255, 0, 0, 150)
		screen.drawCircleF((i-1) * spacing, (h/2) - x)
		
		if i &gt; 1 then
			screen.drawLine((i-1) * spacing, (h/2) - x, (i-2) * spacing, (h/2) - data[i-1])
		end
	end
end'>
					<pos x="1.25"/>
					<in1 component_id="13">
						<v bools="15" 01="14.741993" 02="0.102484" 03="-0.022576" 05="3.804746" 06="-0.069388" 07="-0.11062" 09="3.393028" 10="-0.06965" 11="-0.088845" 13="3.630922" 14="-0.069908" 15="-0.104057"/>
					</in1>
				</object>
			</c>
			<c type="34">
				<object id="8" n="Channel To Read">
					<pos x="-0.25" y="1.75"/>
					<out1 v="2"/>
					<v text="2" value="2"/>
				</object>
			</c>
			<c type="40">
				<object id="13" count="2" offset="2">
					<pos x="-0.25"/>
					<inc component_id="3"/>
					<in1 component_id="10"/>
					<in2 component_id="12"/>
				</object>
			</c>
		</components>
		<components_bridge>
			<c type="4">
				<object id="3">
					<pos x="-1.75" y="0.25"/>
					<in1>
						<v bools="15" 01="14.741993" 02="0.102484" 03="-0.022576" 05="3.804746" 06="-0.069388" 07="-0.11062" 09="3.393028" 10="-0.06965" 11="-0.088845" 13="3.630922" 14="-0.069908" 15="-0.104057"/>
					</in1>
					<out1>
						<v bools="15" 01="14.741993" 02="0.102484" 03="-0.022576" 05="3.804746" 06="-0.069388" 07="-0.11062" 09="3.393028" 10="-0.06965" 11="-0.088845" 13="3.630922" 14="-0.069908" 15="-0.104057"/>
					</out1>
				</object>
			</c>
			<c type="7">
				<object id="6">
					<pos x="2.75"/>
					<in1 component_id="7" node_index="1"/>
				</object>
			</c>
			<c type="2">
				<object id="10">
					<pos x="-1.75" y="-0.25"/>
				</object>
			</c>
			<c type="2">
				<object id="12">
					<pos x="-1.75" y="-0.75"/>
				</object>
			</c>
		</components_bridge>
		<groups/>
		<component_states>
			<c0 id="7" script='data = {}
index = 1
w = 0
h = 0
spacing = 5

channel = property.getNumber("Channel To Read")
function onTick()
	multiplier = input.getNumber(3)
	subtractor = input.getNumber(4)
	value = (input.getNumber(channel) * multiplier) - subtractor
	
	if index &gt; w/spacing then
		index = 1
		data = {}
	end
	
	data[index] = value
	index = index + 1
end

function onDraw()
	w = screen.getWidth()
	h = screen.getHeight()					
	
	screen.setColor(255, 255, 255)
	
	screen.setColor(255, 255, 255, 150)
	screen.drawLine(0, h/2, w, h/2)
	
	screen.drawText(0, 23, "data: " .. data[1])
	
	for i,x in ipairs(data) do
		screen.setColor(255, 0, 0, 150)
		screen.drawCircleF((i-1) * spacing, (h/2) - x)
		
		if i &gt; 1 then
			screen.drawLine((i-1) * spacing, (h/2) - x, (i-2) * spacing, (h/2) - data[i-1])
		end
	end
end'>
				<pos x="1.25"/>
				<in1 component_id="13">
					<v bools="15" 01="14.741993" 02="0.102484" 03="-0.022576" 05="3.804746" 06="-0.069388" 07="-0.11062" 09="3.393028" 10="-0.06965" 11="-0.088845" 13="3.630922" 14="-0.069908" 15="-0.104057"/>
				</in1>
			</c0>
			<c1 id="8" n="Channel To Read">
				<pos x="-0.25" y="1.75"/>
				<out1 v="2"/>
				<v text="2" value="2"/>
			</c1>
			<c2 id="13" count="2" offset="2">
				<pos x="-0.25"/>
				<inc component_id="3"/>
				<in1 component_id="10"/>
				<in2 component_id="12"/>
			</c2>
		</component_states>
		<component_bridge_states>
			<c0 id="3">
				<pos x="-1.75" y="0.25"/>
				<in1>
					<v bools="15" 01="14.741993" 02="0.102484" 03="-0.022576" 05="3.804746" 06="-0.069388" 07="-0.11062" 09="3.393028" 10="-0.06965" 11="-0.088845" 13="3.630922" 14="-0.069908" 15="-0.104057"/>
				</in1>
				<out1>
					<v bools="15" 01="14.741993" 02="0.102484" 03="-0.022576" 05="3.804746" 06="-0.069388" 07="-0.11062" 09="3.393028" 10="-0.06965" 11="-0.088845" 13="3.630922" 14="-0.069908" 15="-0.104057"/>
				</out1>
			</c0>
			<c1 id="6">
				<pos x="2.75"/>
				<in1 component_id="7" node_index="1"/>
			</c1>
			<c2 id="10">
				<pos x="-1.75" y="-0.25"/>
			</c2>
			<c3 id="12">
				<pos x="-1.75" y="-0.75"/>
			</c3>
		</component_bridge_states>
		<group_states/>
	</group>
</microprocessor>

